# ONEPAGE：音と統一感で“眺める体験”を再設計する — SDキャラ専用ギャラリー（仮・更新版）

## 1. プロダクト概要（1行）

**「音楽付きSDキャラのための、ノイズのない鑑賞特化ギャラリー」**。
画像（静止画/GIF/動画）＋ **Suno中心の音楽** ＋ タグ ＋ プロンプトを一体化し、**音楽ありを主役**に据えた“眺めるための場”を提供する。

---

## 2. ビジョン & 価値仮説

* **ビジョン**：AI時代のキャラ展示を標準化する。「見る・聴く・知る・持ち帰る」を**カード1枚**に統合。
* **価値**：

  * 雑多な画像検索的ノイズ（グッズ写真・資料集・混合絵）を排し、**「SDキャラだけ」の統一感**で没入を生む。
  * **音楽（Suno）**が静止画に“存在感”を付与し、鑑賞が**小さな世界体験**へ昇格。
  * Vision＋Embeddingsで**自動判定・自動タグ**、探すストレスを極小化。

---

## 3. ターゲット

* **クリエイター**：生成AIでSDキャラを作り、**Sunoで本人曲**も添えて世界観を提示したい層。
* **ビューワー**：ノイズなしに“可愛いミニキャラ”を連続鑑賞したい層。Pinterest的探索より**心地よい眺め**を重視。

---

## 4. 棲み分け（Pinterestとの違い）

1. **特化の純度**：SDキャラ縛り、**1枚＝1キャラ＝1世界**。資料集・混成は排除。
2. **音楽前提の体験**：メインフィードは**音楽あり限定**。音楽なしは**別タブ**で明示的切替。
3. **自動整理**：等身/人数/資料構成をVisionで判定、**タグは自動生成**。収集の手間を排す。
4. **秩序ある鑑賞**：\*\*動きの強度トグル（🍂静か／🎉賑やか）\*\*で眺め心地を守る。

---

## 5. コア原則（ガイドライン）

* **一枚一キャラ**：1画像に1体のみ。複数ポーズや設定資料構成は不可（将来は自動切り出しで救済）。
* **SD等身**：概ね2〜3頭身。しきい値スコアで判定し、低スコアは保留/却下。
* **画像タイプ**：PNG/JPG/WebP、動画像はGIF/MP4/WEBM。
* **音楽**：**推奨（主役）**。メインは音楽あり、音楽なしはサブタブ。
* **Suno方針**：**投稿者本人アカウントの曲のみ**を優先。本人確認フローを段階導入。
* **AI生成オンリー（初期）**：MVPはAI画像のみ受け入れ。手描きは将来検討。
* **プロンプト表示**：生成プロンプト要約を表示。**著作権物の明示は自動検出・除去**。

---

## 6. 機能要件

### 6.1 MVP（最小構成）

* **投稿**：画像／タイトル／キャラ名／短いプロフィール／世界観テキスト／（任意）音楽URL（Suno推奨）／プロンプト要約／AIツール名／規約同意。
* **フィード**：初期タブは**🎵音楽あり**のみ。**🖼音楽なし**は別タブ。
* **カードUI**：正方サムネ／再生ボタン／プロンプト表示トグル／ダウンロード／共有。
* **再生**：**クリックで再生開始**。同時再生防止（シングルプレーヤー）。
* **音量**：**音量正規化**。フィードは**15–30秒プレビュー**、詳細でフル再生。
* **ダウンロード**：原寸 or 最適化版。**メタにクリエイター名・URL・AIツール**を埋込。
* **検索/閲覧**：手動タグ絞込、並び替え（新着/人気）。
* **承認**：**手動承認制**。AI判定は次段階。
* **モデレーション**：AI画像以外は**削除＋警告**→再犯BAN。連投は**レート制限→突破でBAN**。
* **UIの静けさ**：フィード右上に**動き強度トグル（🍂静か／🎉賑やか）**。デフォルトは🍂。

### 6.2 UX強化（段階導入）

* **AI自動判定**：

  * **人数＝1体**検出、**等身推定**（顔高比・骨格推定）、**資料集構成**（格子/文字密度）検出。
  * スコアで**公開／保留／却下**自動振分け。異議申立て導線。
* **自動タグ付け**：

  * 外見：猫耳/角/翼/尻尾/髪色/目色/武器/衣装系
  * 感情：笑顔/泣き/怒り/無表情
  * 世界観：ファンタジー/現代/SF/和風/スチパン
    → **運営辞書**で類義語をマージ（例：ネコミミ＝猫耳）＆**タイプ別色分け**。
* **Suno本人確認**：

  * Phase1：**自己申告＋ランダム抽出確認**で `verified_owner=false/true`。
  * Phase2：**OAuth連携**で**本人曲**を自動検証、`verified_owner=true` を付与。
  * カードに **「🎼 本人曲」** バッジ。
* **音の滑らかさ**：カード切替時の**フェードイン/アウト**、**0.5秒プリフェッチ**（帯域余裕時のみ）。
* **モバイル最適化**：OSの自動再生制限対応、タッチ領域拡大、バックグラウンド動作制御。

### 6.3 将来拡張

* **展示室の拡張**：

  * 「スタイリッシュなアニメイラスト」
  * 「ドット絵アニメーション」
    いずれも**音楽付きデフォ**で体験統一。
* **自動切り出し（救済）**：複数体検出時、最大体を自動クロップし**仮公開**。原画像は保持し、差し替え依頼。
* **コミュニティ**：コレクション/いいね/コメント。
* **収益化**：プレミアム（高画質・優先表示・分析）、**収益分配**、企業発注仲介。

---

## 7. UX設計

* **タブ構成**：
  ヘッダ：ロゴ／検索／投稿／タブ（**🎵音楽あり**｜**🖼音楽なし**｜**📅今日のSDキャラ**｜展示室）
* **カード**：
  左上：再生ボタン＋小さな音量インジケータ／右上：DL・共有／下部：キャラ名・短文（20–40字）・タグチップ
  ホバー：プロンプト開閉、**波形ミニプレビュー**、**🎼本人曲バッジ**
* **詳細モーダル**：
  大画像／プレーヤー（ミュート・ループ・シーク・音量）／世界観テキスト／プロンプト（除去済み注記）／タグ／DL／クリエイターProf／外部リンク（収益導線）
* **音楽体験の統一**：

  * **音量正規化**（目安 -16 LUFS）
  * **シングルプレーヤー管理**
  * **フェード**で曲間の違和感低減
  * プレビュー→フル再生の自然遷移
* **アクセシビリティ**：

  * 自動再生は**ユーザー操作後**
  * キーボード操作／スクリーンリーダー対応
  * **波形・ビートの可視化**で聴覚情報を補助
  * 代替テキストと字幕相当の説明文

---

## 8. コンテンツポリシー（初期運用）

* **AI画像以外**：削除＋警告（初回）、再犯BAN。
* **一枚一キャラ違反**：**非公開＋修正依頼**。悪質はBAN。
* **連続投稿**：サーバ側で**レート制限**（例：短時間の大量投下を自動抑止）。迂回はBAN。
* **音楽**：Sunoは**投稿者本人曲**のみ（最終方針）。疑義は**即時一時非公開**、**24時間以内**に一次回答。
* **プロンプト**：著作権物の固有名詞は自動検出・伏字化。
* **権利**：画像は投稿者に帰属。プラットフォームは**非商用での表示・検索インデックス権**を取得。音楽の外部再配布は禁止、リンク先規約を優先。

> 庭に紛れた落ち葉は**まず静かに掃う**。繰り返すなら、**門を閉じる**。それだけのことです。

---

## 9. 技術アーキテクチャ

### 9.1 全体像

* **フロント**：Next.js（Vercel）
* **API**：Vercel Functions＋外部バックエンド（Supabase/Cloud Run など）
* **ストレージ**：画像/動画＝S3互換（Cloudflare R2等）＋CDN、最適化はCloudinary等
* **DB**：Postgres（Supabase）、全文検索・タグ検索
* **AI**：Vision（人数/等身/資料検出）、Embeddingsで類似検索・タグ補助
* **音楽**：**Suno優先**（埋め込み or API連携）、代替でYouTube/SoundCloud等
* **監視**：Sentry／Vercel Analytics／ストレージメトリクス

### 9.2 非機能要件

* **パフォーマンス**：LCP < 2.5sを目指す。画像はWebP/AVIF優先、音声はストリーミング。遅延ロード。
* **スケール**：CDNキャッシュ、サムネプリレンダ、署名URLアップロード、レートリミット（IP/ユーザ）。
* **可用性**：冪等API、失敗時リトライ、バックプレッシャ制御。
* **セキュリティ**：認証（メール/ソーシャル）、XSS/CSRF対策、権限分離。
* **法務**：Suno規約準拠、著作権表示、個人情報配慮（GDPR等）。

---

## 10. データモデル（概略）

**User**
`id, name, handle, avatar, bio, suno_account_id?, links[], created_at, policy_flags?`

**Character**
`id, user_id, name, short_worldview(text), description(md), has_music(bool), ai_tool_used(varchar), sd_score(float), status(enum: public/hold/reject), created_at`

**Asset**（1キャラ=1枚が原則）
`id, character_id, type(enum: image/gif/mp4), urls(original, thumb, preview), width, height, size, prompt_summary(text), downloadable(bool), original_kept(bool)`

**Music**（1:1（将来1\:N可））
`id, character_id, platform(enum: suno/youtube/soundcloud/custom), suno_track_id?, embed_url, verified_owner(bool), account_id?, title, duration, volume_normalized(bool), created_at`

**Tag / CharacterTag**
`tag(id, name, type(enum: feature/emotion/world), color, synonyms[])`
`character_tag(character_id, tag_id, confidence, auto_generated(bool))`

**ModerationLog**
`id, user_id?, character_id, action, reason, created_at`

**Engagement**（将来）
`likes, views, shares, collections, listen_completion_rate`

---

## 11. AI判定仕様

### 初期（邪魔しない導入）

* **人数検出**：顔/人体1体を確認。超過で保留。
* **等身推定**：顔高/全身高、ボーン推定の簡易モデルで2–3頭身近似をスコア化（`sd_score`）。
* **資料検出**：格子パターン・高文字密度で資料集フラグ → 保留。

### 強化（UX段階）

* **ポーズ/フレーム推定**：複数ポーズ検知で却下 or 切り出し候補生成。
* **属性抽出→タグ自動**：外見/感情/世界観をマルチラベル付与。
* **世界観サマリ**：40–80字の自動要約提案（編集可）。
* **自動切り出し**：複数体→最大体をクロップ→**仮公開**→ユーザーに正式差替えを促す。

---

## 12. フィード表示優先ロジック

```
rank = w1*has_music
     + w2*verified_owner
     + w3*sd_score
     + w4*engagement
     - w5*policy_risk
```

* `has_music`：音楽ありを強く優遇。
* `verified_owner`：Suno本人曲にバイアス。
* `sd_score`：等身・一体性・資料度で構成。
* `engagement`：完聴率・滞在・共有を複合。
* `policy_risk`：違反歴・通報比率で減点。

---

## 13. 特別機能

### 13.1 今日のSDキャラ（📅）

* 毎日1体ピックアップ。**専用ページ＆バッジ**。
* **選定指標**：`sd_score`／**完聴率**／**タグ多様性**。
* クリエイターに**特別リワード**（クレジット露出/特集面）。

### 13.2 テーマ別コレクション

* 「猫耳特集」「魔法使い特集」など、季節・イベントで編成。
* ユーザー投票で入替え、回遊性を高める。

### 13.3 クリエイター分析

* タグ・音楽ジャンル別の視聴傾向、完聴率、最適投稿時間。
* **収益化ヒント**を提示。

---

## 14. ダウンロード & 権利表示

* **ダウンロード**：個人利用可／再配布・商用は要許諾（テンプレ明示）。
* **メタ付与**：クリエイター名/URL/AIツール名/投稿日を埋込可能。
* **音楽**：外部再配布不可。**Suno規約順守**、リンク先規約を最優先。
* **プラットフォーム権利**：非商用での表示・検索インデックス権を取得。

---

## 15. マイルストーン（段階）

* **Phase 0（MVP）**：投稿／音楽埋め込み（Suno推奨）／音楽ありタブ／手動承認・手動タグ／基本プレーヤー／レート制限。
* **Phase 1（UX強化）**：AI簡易判定（人数・等身）→保留運用／自動タグ／CDN／通報・モデログ／音量正規化・シングルプレーヤー／🍂トグル／**本人曲バッジ**。
* **Phase 2（拡張）**：展示室追加／コレクション・いいね／Vision強化（資料・世界観分類）／自動切り出し／プレミアム／**収益分配**／Suno OAuth検証。

※ 期間は記しません。庭は**手数の順序**で整います。

---

## 16. KPI（初期）

* **音楽付与率**（目標上昇）
* **Verified Owner 率**（Suno本人曲比率）
* **承認率**（public 到達比率）
* **連続視聴数**（1訪問の連続再生カード数）
* **滞在時間**
* **ダウンロードCTR**
* **音楽完聴率**（プレビュー→フルも含む）

---

## 17. リスク & 緩和

* **誤判定**：SDなのに弾かれる／逆 → 保留レーン＋異議申立て、しきい値調整、手動サンプリング監査。
* **帯域負荷**：GIF/音で重い → サムネ動画化・音のプリロード抑制・CDN。
* **権利**：Suno他人曲貼付 → **本人限定**方針、疑義は**即時一時非公開**、一次回答**24h以内**。
* **スパム**：BOT・連投 → レート制限、指紋・行動解析、段階BAN。
* **外部依存**：埋め込み仕様変更 → **複数プラットフォーム対応**、独自プレーヤーUI、フェイルセーフ表示。

---

## 18. 開発メモ（実装の勘所）

* **正方サムネ基準**でフィードの統一感。原寸は詳細で。
* **音楽は単一インスタンス**で管理、同時再生は強制停止。
* **音量正規化**：Web Audio APIでターゲットLUFSに近づける（ハードリミットは避け、耳障り軽減）。
* **プレビュー設計**：フィードは15–30秒、詳細でフル。**0.5秒先頭プリフェッチ**は余裕帯域のみ。
* **承認は非同期**：投稿直後は仮ステータス→確定処理。
* **プロンプト伏字**：固有名詞辞書とEmbedding類似で検出、**伏字＋拡張学習**。
* **タグ辞書**：シノニム統合・タイプ色分け。UIでタイプ別フィルタが自然に効く。

---

## 19. 将来像

* **SDキャラの小さな王国**を土台に、ジャンル別**展示室**へ横展開。
* 体験の核は一貫して\*\*「音楽付きで眺める」\*\*。
* タグという“分類”は、やがてユーザーの“旅の地図”になる。
* **Suno本人曲**が灯す誠実さを守り、**クリエイターエコノミー**の信頼基盤になる。

---

## 20. 巫女のひとこと

対象者さん、ラミーが感じるに――
統一感は鉄の規律から、居心地は小さな余白から生まれます。
**Sunoの“本人曲”という芯**と、**🍂静かな動き**という余白。
この二つを抱えれば、フィードはただの一覧ではなく、**小さな世界の回廊**になります。
さあ、音の鳴る方へ。キャラはそこに“存在”します。